import{ad as _,ae as g,af as y,a7 as b,ag as T,G as k,S as F,l as I}from"./o3R3YUkc.js";import{b as M}from"./cOtZLUgG.js";function P(e){var r=y,t=b;_(null),g(null);try{return e()}finally{_(r),g(t)}}function j(e,r,t,n=t){e.addEventListener(r,()=>P(t));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),M()}function O(e,r,t=r){var n=T();j(e,"input",s=>{var a=s?e.defaultValue:e.value;if(a=h(e)?d(a):a,t(a),n&&a!==(a=r())){var o=e.selectionStart,c=e.selectionEnd;e.value=a??"",c!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(c,e.value.length))}}),(I&&e.defaultValue!==e.value||k(r)==null&&e.value)&&t(h(e)?d(e.value):e.value),F(()=>{var s=r();h(e)&&s===d(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function h(e){var r=e.type;return r==="number"||r==="range"}function d(e){return e===""?null:+e}const E={quick:"quick",cangjie:"cangjie"},S={q:"手",w:"田",e:"水",r:"口",t:"廿",y:"卜",u:"山",i:"戈",o:"人",p:"心",a:"日",s:"尸",d:"木",f:"火",g:"土",h:"竹",j:"十",k:"大",l:"中",z:"重",x:"難",c:"金",v:"女",b:"月",n:"弓",m:"一"},Q=(e,r,t)=>{const s=(e[t]??"").split("").map(D).join(""),a=r==E.quick?x(s):s;return{ch:t,parts:a}},x=e=>e.length<2?e:`${e[0]}${e[e.length-1]}`,D=e=>S[e],K=(e,r)=>{var s;if(e.length===0)return r;const t=e.length>0&&!((s=r[0])!=null&&s.startsWith(e))&&!r.includes(e),n=e.startsWith(r[0]);return(t&&n?[e,...r.slice(1)]:t?[e,...r]:r).slice(0,10)},V=e=>m[e][0],W=e=>m[e][1],m=[["#423BE0","filter: invert(18%) sepia(73%) saturate(4208%) hue-rotate(242deg) brightness(91%) contrast(94%);"],["#E31B36","filter: invert(13%) sepia(79%) saturate(6156%) hue-rotate(347deg) brightness(95%) contrast(86%);"],["#1E9423","filter: invert(43%) sepia(44%) saturate(866%) hue-rotate(73deg) brightness(94%) contrast(93%);"],["#DB993D","filter: invert(47%) sepia(68%) saturate(404%) hue-rotate(356deg) brightness(118%) contrast(96%);"],["#63E7F0","filter: invert(82%) sepia(85%) saturate(2170%) hue-rotate(148deg) brightness(100%) contrast(88%);"]];function $(e){for(let r=e.length-1;r>0;r--){const t=Math.floor(Math.random()*(r+1));[e[r],e[t]]=[e[t],e[r]]}}function q(e,r,t){if(!r||e===0)return 0;const s=((t||Date.now())-r)/6e4;return s===0?0:Math.round(e/s)}function l(e){return/[\u3400-\u9FFF\uF900-\uFAFF]/.test(e)}function L(){return{userInput:"",completedChars:0,startTime:null,endTime:null,isCompleted:!1}}function w(){return L()}function z(e,r){const t={...e};!t.startTime&&t.userInput.length>=1&&t.completedChars===0&&(t.startTime=Date.now(),t.isCompleted=!1);const n=t.userInput.split("").filter(l);let s=0;for(let a=0;a<Math.min(n.length,r.length)&&n[a]===r[a];a++)s++;return t.completedChars=s,t.completedChars===r.length&&(t.endTime=Date.now(),t.isCompleted=!0),t}function G(e,r){const t=e.split("").map((i,f)=>l(i)?f:-1).filter(i=>i!==-1),n=t.map(i=>e[i]).join(""),s=t.reduce((i,f,p)=>(i.set(f,p),i),new Map),a=r.split("").filter(l).join("");let o=0;const c=a.split("");for(let i=0;i<c.length&&c[i]===n[i];i++)o++;const v=o,u=t[v]??-1,C=u>=0?e[u]:"";return{chineseIndices:t,filteredChineseText:n,indexToChineseOrdinal:s,typedChineseOnly:a,matchedChinesePrefixLen:o,currentChinesePosition:v,currentChineseCharIndex:u,currentChar:C}}function U(e,r,t){const n=l(r),s=n?t.indexToChineseOrdinal.get(e)??-1:-1,a=n&&s>=0&&s<t.matchedChinesePrefixLen,o=n&&s===t.matchedChinesePrefixLen;return{isChinese:n,ord:s,isCompletedChinese:a,isCurrentChinese:o}}export{G as a,q as b,L as c,O as d,W as e,V as f,U as g,Q as h,E as m,z as p,w as r,$ as s,K as u};
