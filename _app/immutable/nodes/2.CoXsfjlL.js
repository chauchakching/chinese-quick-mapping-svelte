import{d as be,t as S,a as y,c as Te,h as Ee,s as J}from"../chunks/Ymcw9Dae.js";import{p as Q,t as I,e as V,c as d,r as a,ad as Oe,aN as Pe,s as w,a as B,g as r,f as m,W as Ae,u as U,d as x,$ as Ce,n as Ie}from"../chunks/DV3kNzOM.js";import{i as _e,s as me,b as qe,a as he}from"../chunks/C2b9LmBS.js";import{a as j,s as ge,e as ue,b as Me,i as De}from"../chunks/BJJjnDYU.js";import{i as ze,c as He,C as Ne,h as Fe,m as P,e as fe,q as ve,u as Ge}from"../chunks/DLVO2nLz.js";import{r as O,b as xe}from"../chunks/Bf0cNQpg.js";import{s as we,p as Le}from"../chunks/Xdw2XHec.js";import{p as Re}from"../chunks/Db7oigDW.js";const We=()=>performance.now(),g={tick:t=>requestAnimationFrame(t),now:()=>We(),tasks:new Set};function ye(){const t=g.now();g.tasks.forEach(e=>{e.c(t)||(g.tasks.delete(e),e.f())}),g.tasks.size!==0&&g.tick(ye)}function Je(t){let e;return g.tasks.size===0&&g.tick(ye),{promise:new Promise(s=>{g.tasks.add(e={c:t,f:s})}),abort(){g.tasks.delete(e)}}}const Ue=!0,yt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ue},Symbol.toStringTag,{value:"Module"}));function Be(t,e){t.key==="Escape"&&e.onClose()}var Ke=(t,e)=>e.onClose(),Qe=S('<div data-testid="modal" style="background-color: rgba(0, 0, 0, 0.4); transition: opacity 0.15s ease 0s;" role="dialog" tabindex="-1"><button><!></button></div>');function Ve(t,e){Q(e,!0);var s=Qe();s.__click=[Ke,e],s.__keydown=[Be,e];var l=d(s),f=d(l);{var i=n=>{var v=Te(),u=Oe(v);we(u,()=>e.children),y(n,v)};_e(f,n=>{e.children&&n(i)})}a(l),a(s),I(()=>{j(s,1,`fixed z-10 w-full h-full left-0 top-0 p-8 flex items-center justify-center ${e.visible?"":"pointer-events-none opacity-0"}`),ge(s,"aria-modal",e.visible),j(l,1,`${e.visible?"":"hidden "}bg-white rounded flex flex-col items-center justify-center`)}),y(t,s),V()}be(["click","keydown"]);function pe(t){return Object.prototype.toString.call(t)==="[object Date]"}function Ye(t){return t}function Xe(t){const e=t-1;return e*e*e+1}function K(t,e){if(t===e||t!==t)return()=>t;const s=typeof t;if(s!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const l=e.map((f,i)=>K(t[i],f));return f=>l.map(i=>i(f))}if(s==="object"){if(!t||!e)throw new Error("Object cannot be null");if(pe(t)&&pe(e)){const i=t.getTime(),v=e.getTime()-i;return u=>new Date(i+u*v)}const l=Object.keys(e),f={};return l.forEach(i=>{f[i]=K(t[i],e[i])}),i=>{const n={};return l.forEach(v=>{n[v]=f[v](i)}),n}}if(s==="number"){const l=e-t;return f=>t+f*l}return()=>e}function Ze(t,e={}){const s=Pe(t);let l,f=t;function i(n,v){if(f=n,t==null)return s.set(t=n),Promise.resolve();let u=l,p=!1,{delay:h=0,duration:b=400,easing:A=Ye,interpolate:k=K}={...e,...v};if(b===0)return u&&(u.abort(),u=null),s.set(t=f),Promise.resolve();const q=g.now()+h;let T;return l=Je($=>{if($<q)return!0;p||(T=k(t,n),typeof b=="function"&&(b=b(t,n)),p=!0),u&&(u.abort(),u=null);const M=$-q;return M>b?(s.set(t=n),!1):(s.set(t=T(A(M/b))),!0)}),l.promise}return{set:i,update:(n,v)=>i(n(f,t),v),subscribe:s.subscribe}}var et=S('<div class="fixed left-1/2 bg-white py-2 px-4 border border-solid border-slate-100 rounded-3xl drop-shadow"><!></div>');function tt(t,e){Q(e,!0);const[s,l]=me(),f=()=>he(r(h),"$y",s),i=25,n=2e3,v=()=>Ze(0,{duration:250,easing:Xe});let u=Re(e,"ele",15),p=w(null),h=w(B(v()));O(()=>{u()&&u(u().open=()=>{r(p)&&(qe(m(h,v(),!0),"$y",s),clearTimeout(r(p))),r(h).set(u().offsetHeight+i),m(p,setTimeout(()=>{r(h).set(0),m(p,null)},n),!0)},!0)});var b=et(),A=d(b);we(A,()=>e.children??Ae),a(b),xe(b,k=>u(k),()=>u()),I(()=>ze(b,`transform: translate(-50%, -100%); top: ${f()}px`)),y(t,b),V(),l()}var rt=S('<div class="flex justify-center items-center"><img src="/icons/check.svg" alt="success icon" class="h-4 w-4 mr-2 text-green-500" style="filter: invert(59%) sepia(70%) saturate(487%) hue-rotate(89deg) brightness(90%) contrast(94%)"> <span>已複製連結</span></div>'),st=(t,e,s)=>{m(e,""),r(s).focus()},ot=(t,e)=>{navigator.clipboard.writeText(window.location.href),r(e).open()},at=S('<button><img src="/icons/link.svg" alt="複製連結" class="h-4 w-4"></button>'),it=(t,e)=>m(e,P.quick,!0),nt=(t,e)=>m(e,P.cangjie,!0),lt=(t,e,s,l)=>r(e)&&s(l()),ct=S('<button data-testid="char-box"><div class="flex flex-row text-2xl leading-8"> </div> <div class="flex flex-row text-xs text-gray-500"> </div></button>'),dt=(t,e,s)=>{m(e,s,!0)},ut=S('<button class="bg-white hover:bg-gray-200 border mr-1 mt-2 px-2 rounded-full truncate" data-testid="history-entry-button" style="max-width: 180px;"> </button>'),ft=S('<div class="w-full my-12 mx-12"><!></div>'),vt=S('<section><!> <div><div><div class="flex flex-row justify-between mb-4"><div class="flex flex-row"><button><img src="/icons/trash.svg" alt="清空" class="h-4 w-4 mr-2"> <span>清空</span></button></div> <div class="flex flex-row"><!> <div class="flex-0 w-20 -mr-4"><button>速成</button></div> <div class="flex-0 w-20 -mr-3"><button>倉頡</button></div></div></div></div> <div><div class="flex flex-col sm:flex-row items-stretch"><div class="flex-1 p-2 border rounded-t sm:rounded-b bg-white shadow-md flex"><textarea id="user-input" placeholder="輸入字句" rows="6" class="w-full outline-none resize-none text-lg"></textarea></div> <div class="flex-1 px-2 pt-3 pb-1 border-l border-r border-b sm:border-0 rounded-b sm:rounded-t sm:ml-4 flex content-start flex-wrap bg-white shadow-md relative" data-testid="char-box-container"></div></div></div> <div class="flex flex-row flex-wrap items-stretch" data-testid="history-entries"><div class="flex-1 mt-2"></div> <div class="sm:flex-1"></div></div></div> <!></section>');function kt(t,e){Q(e,!0);const[s,l]=me(),f=()=>he(Le,"$page",s),i=new Set(He),n="速成輸入法，或稱簡易輸入法，亦作速成或簡易，為倉頡輸入法演化出來的簡化版本。";let v=w(void 0);const u=(o,_)=>{const c=new URL(window.location.href);c.searchParams.set(o,_),window.history.pushState(null,"",c.toString())};let p=w(n);O(()=>{{const o=f().url.searchParams.get("q");o&&m(p,o,!0)}}),O(()=>{r(p)!==n&&typeof window<"u"&&u("q",r(p))});let h=w(void 0);O(()=>{r(h)&&(r(h).focus(),r(h).select())});let b=w(B(P.quick)),A=U(()=>r(p).split("").map(o=>{const{ch:_,parts:c}=fe(ve,r(b),o);return{ch:_,parts:c}})),k=w(B(JSON.parse(localStorage.getItem("inputHistory")||"[]"))),q=U(()=>r(p)!==n);O(()=>{r(q)&&m(k,Ge(r(p),r(k)),!0)}),O(()=>{localStorage.setItem("inputHistory",JSON.stringify(r(k)))});let T=w(!1),$=w("速");const M=o=>{m($,o,!0),m(T,!0)};var D=vt();Ee(o=>{Ce.title="速成查字"});var Y=d(D);tt(Y,{get ele(){return r(v)},set ele(o){m(v,o,!0)},children:(o,_)=>{var c=rt();y(o,c)},$$slots:{default:!0}});var z=x(Y,2),H=d(z),X=d(H),N=d(X),Z=d(N);j(Z,1,"flex items-center text-center block border rounded py-1 px-3 hover:bg-gray-200 shadow rounded bg-white"),Z.__click=[st,p,h],a(N);var ee=x(N,2),te=d(ee);{var ke=o=>{var _=at();j(_,1,"text-center block border rounded mr-2 py-1 px-2 hover:bg-gray-200 shadow rounded bg-white"),_.__click=[ot,v],y(o,_)};_e(te,o=>{var _;typeof navigator<"u"&&((_=navigator==null?void 0:navigator.clipboard)!=null&&_.writeText)&&o(ke)})}var F=x(te,2),re=d(F);re.__click=[it,b],a(F);var se=x(F,2),oe=d(se);oe.__click=[nt,b],a(se),a(ee),a(X),a(H);var G=x(H,2),ae=d(G),L=d(ae),R=d(L);Me(R),xe(R,o=>m(h,o),()=>r(h)),a(L);var ie=x(L,2);ue(ie,21,()=>r(A),De,(o,_)=>{let c=()=>r(_).ch,C=()=>r(_).parts;var E=ct();const ce=U(()=>i.has(c()));E.__click=[lt,ce,M,c];var W=d(E),$e=d(W,!0);a(W);var de=x(W,2),je=d(de,!0);a(de),a(E),I(()=>{j(E,1,`flex flex-col items-center mx-1 mb-2 px-2.5 py-1.5 ${r(ce)?"hover:bg-gray-100 border rounded-lg shadow-sm cursor-pointer":"cursor-default"}`),ge(E,"data-box-char",c()),J($e,c()),J(je,C())}),y(o,E)}),a(ie),a(ae),a(G);var ne=x(G,2),le=d(ne);ue(le,20,()=>r(k),o=>o,(o,_)=>{var c=ut();c.__click=[dt,p,_];var C=d(c,!0);a(c),I(()=>J(C,_)),y(o,c)}),a(le),Ie(2),a(ne),a(z);var Se=x(z,2);Ve(Se,{get visible(){return r(T)},onClose:()=>{m(T,!1),m($,"")},children:(o,_)=>{var c=ft(),C=d(c);Ne(C,{get char(){return r($)},get parts(){return fe(ve,P.cangjie,r($)).parts}}),a(c),y(o,c)},$$slots:{default:!0}}),a(D),I(()=>{j(re,1,`text-center block border border-slate-300 py-1 px-4 shadow rounded-l ${r(b)===P.quick?"text-white bg-slate-500 hover:bg-slate-700":"bg-white hover:bg-gray-200"}`),j(oe,1,`text-center block border border-slate-300 py-1 px-4 shadow rounded-r ${r(b)===P.cangjie?"text-white bg-slate-500 hover:bg-slate-700":"bg-white hover:bg-gray-200"}`)}),Fe(R,()=>r(p),o=>m(p,o)),y(t,D),V(),l()}be(["click"]);export{kt as component,yt as universal};
